(()=>{var e={};e.id=626,e.ids=[626],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},7030:(e,s,r)=>{"use strict";r.r(s),r.d(s,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>u,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var t={};r.r(t),r.d(t,{POST:()=>c});var o=r(6559),i=r(8088),a=r(7719),n=r(2190);async function c(e){try{let s,r,{accessToken:t}=await e.json();if(!t)return n.NextResponse.json({error:"Access token required"},{status:400});let o=process.env.GOOGLE_ADS_CUSTOMER_ID;if(!o)return n.NextResponse.json({error:"Google Ads customer ID not configured"},{status:500});try{s=await fetch(`https://googleads.googleapis.com/v14/customers/${o}/googleAds:searchStream`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"developer-token":process.env.GOOGLE_ADS_DEVELOPER_TOKEN||"","Content-Type":"application/json"},body:JSON.stringify({query:`
              SELECT 
                campaign.id,
                campaign.name,
                campaign.status,
                metrics.impressions,
                metrics.clicks,
                metrics.cost_micros,
                metrics.conversions,
                metrics.average_cpc
              FROM campaign 
              WHERE segments.date DURING LAST_30_DAYS
            `})})}catch(e){return console.error("Fetch error:",e),n.NextResponse.json({error:"Fetch error",details:String(e)},{status:500})}if(!s.ok){let e=await s.text();return console.error("Failed to fetch campaigns:",e),n.NextResponse.json({error:"Failed to fetch campaign data",details:e},{status:500})}try{r=await s.json()}catch(e){return console.error("JSON parse error:",e),n.NextResponse.json({error:"JSON parse error",details:String(e)},{status:500})}let i=r.results?.map(e=>({id:e.campaign.id,name:e.campaign.name,status:e.campaign.status,impressions:parseInt(e.metrics.impressions)||0,clicks:parseInt(e.metrics.clicks)||0,cost:parseInt(e.metrics.cost_micros)/1e6||0,conversions:parseFloat(e.metrics.conversions)||0,cpc:parseInt(e.metrics.average_cpc)/1e6||0,ctr:e.metrics.impressions>0?e.metrics.clicks/e.metrics.impressions*100:0,conversion_rate:e.metrics.clicks>0?e.metrics.conversions/e.metrics.clicks*100:0}))||[],a=i.reduce((e,s)=>({impressions:e.impressions+s.impressions,clicks:e.clicks+s.clicks,cost:e.cost+s.cost,conversions:e.conversions+s.conversions}),{impressions:0,clicks:0,cost:0,conversions:0});return a.ctr=a.impressions>0?a.clicks/a.impressions*100:0,a.cpc=a.clicks>0?a.cost/a.clicks:0,a.conversion_rate=a.clicks>0?a.conversions/a.clicks*100:0,n.NextResponse.json({date_range:"Last 30 days",total:a,campaigns:i,source:"real_google_ads"})}catch(e){return console.error("Error fetching real Google Ads data:",e),n.NextResponse.json({error:"Internal server error",details:String(e)},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/ads-data-real/route",pathname:"/api/ads-data-real",filename:"route",bundlePath:"app/api/ads-data-real/route"},resolvedPagePath:"C:\\Users\\Vitaliy\\ppc-landing\\src\\app\\api\\ads-data-real\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:u}=p;function m(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,580],()=>r(7030));module.exports=t})();