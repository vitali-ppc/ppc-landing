# PPCSet AI Server

AI-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ Google Ads –Ω–∞ –±–∞–∑—ñ FastAPI —Ç–∞ OpenAI GPT-4.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°–∫–æ–ø—ñ—é–π—Ç–µ `env.example` –≤ `.env` —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ:

```bash
cp env.example .env
```

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env`:
```env
OPENAI_API_KEY=your_openai_api_key_here
AI_SERVER_HOST=0.0.0.0
AI_SERVER_PORT=8000
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Å–∫—Ä–∏–ø—Ç
python start.py

# –ê–±–æ –Ω–∞–ø—Ä—è–º—É
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

## üê≥ Docker

### –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ –∑ Docker

```bash
# –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫
docker-compose up --build

# –ê–±–æ –±–µ–∑ docker-compose
docker build -t ppcset-ai-server .
docker run -p 8002:8000 -e OPENAI_API_KEY=your_key ppcset-ai-server
```

### –î–µ–ø–ª–æ–π –Ω–∞ Render

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π Web Service** –Ω–∞ [Render](https://render.com)
2. **–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**
3. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
   - **Build Command:** `pip install -r requirements.txt`
   - **Start Command:** `uvicorn main:app --host 0.0.0.0 --port $PORT`
   - **Environment Variables:**
     - `OPENAI_API_KEY`: –≤–∞—à OpenAI API –∫–ª—é—á
     - `AI_SERVER_HOST`: `0.0.0.0`
     - `AI_SERVER_PORT`: `$PORT`

### –î–µ–ø–ª–æ–π –Ω–∞ Railway

1. **–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π** –¥–æ [Railway](https://railway.app)
2. **–î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**
   - `OPENAI_API_KEY`: –≤–∞—à OpenAI API –∫–ª—é—á
3. **Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å Python –¥–æ–¥–∞—Ç–æ–∫**

### –î–µ–ø–ª–æ–π –Ω–∞ VPS

```bash
# –ù–∞ VPS —Å–µ—Ä–≤–µ—Ä—ñ
git clone your-repo
cd ai-server
docker build -t ppcset-ai-server .
docker run -d -p 8000:8000 --name ai-server -e OPENAI_API_KEY=your_key ppcset-ai-server
```

## üì° API Endpoints

### POST /chat
–û—Å–Ω–æ–≤–Ω–∏–π endpoint –¥–ª—è —á–∞—Ç—É –∑ AI.

**–ó–∞–ø–∏—Ç:**
```json
{
  "question": "–Ø–∫ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ –º–æ—é –∫–∞–º–ø–∞–Ω—ñ—é Google Ads?",
  "image": "data:image/jpeg;base64,...", // –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
  "timestamp": "2024-01-01T12:00:00Z"
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "answer": "–í—ñ–¥–ø–æ–≤—ñ–¥—å AI...",
  "timestamp": "2024-01-01T12:00:00Z",
  "model": "gpt-4-turbo",
  "tokens_used": 150
}
```

### GET /ads-data
Mock-–¥–∞–Ω—ñ Google Ads –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.

### GET /health
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —Å–µ—Ä–≤–µ—Ä–∞.

### GET /
–ö–æ—Ä–µ–Ω–µ–≤–∏–π endpoint –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —Å–µ—Ä–≤–µ—Ä.

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

| –ó–º—ñ–Ω–Ω–∞ | –û–ø–∏—Å | –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
|--------|------|------------------|
| `OPENAI_API_KEY` | API –∫–ª—é—á OpenAI | - |
| `AI_SERVER_HOST` | –•–æ—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞ | `0.0.0.0` |
| `AI_SERVER_PORT` | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ | `8000` |
| `AI_SERVER_RELOAD` | –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è | `true` |

### –ú–æ–¥–µ–ª—ñ OpenAI

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `gpt-4-turbo`. –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –≤ `main.py`.

## üõ† –†–æ–∑—Ä–æ–±–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
ai-server/
‚îú‚îÄ‚îÄ main.py          # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª FastAPI –¥–æ–¥–∞—Ç–∫—É
‚îú‚îÄ‚îÄ start.py         # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É
‚îú‚îÄ‚îÄ requirements.txt # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
‚îú‚îÄ‚îÄ Dockerfile       # Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ docker-compose.yml # Docker Compose
‚îú‚îÄ‚îÄ env.example      # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îî‚îÄ‚îÄ README.md        # –¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö endpoints

1. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π endpoint –≤ `main.py`
2. –î–æ–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –≤ —Ü–µ–π README
3. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ —á–µ—Ä–µ–∑ Swagger UI: `http://localhost:8000/docs`

## üöÄ –î–µ–ø–ª–æ–π

### –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫
```bash
python start.py
```

### Docker (–¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ)
```bash
docker build -t ppcset-ai-server .
docker run -p 8000:8000 ppcset-ai-server
```

### Vercel/Heroku (–¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ)
–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ç–∞ –¥–µ–ø–ª–æ–π—Ç–µ —è–∫ Python –¥–æ–¥–∞—Ç–æ–∫.

## üîç –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ª–æ–≥—É—î:
- –ó–∞–ø–∏—Ç–∏ –¥–æ API
- –ü–æ–º–∏–ª–∫–∏ OpenAI
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤

### Health Check
```bash
curl http://localhost:8000/health
```

## üêõ Troubleshooting

### –ü–æ–º–∏–ª–∫–∞ "OPENAI_API_KEY not found"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–∞–π–ª `.env`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π

### –ü–æ–º–∏–ª–∫–∞ "Rate limit exceeded"
- –î–æ—á–µ–∫–∞–π—Ç–µ—Å—è –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª—ñ–º—ñ—Ç–∏ OpenAI

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ä—Ç 8000
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ

### Docker –ø–æ–º–∏–ª–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π Docker
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–æ—Ä—Ç 8002 –≤—ñ–ª—å–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

## üìà –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google Ads API
- [ ] –í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (Pinecone/Weaviate)
- [ ] –ê–Ω–∞–ª—ñ–∑ –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ Vision API
- [ ] –ö–µ—à—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- [ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ 